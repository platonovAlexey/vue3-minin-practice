{"remainingRequest":"/Users/alexey/work/vue3-minin-practice/node_modules/babel-loader/lib/index.js!/Users/alexey/work/vue3-minin-practice/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/alexey/work/vue3-minin-practice/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/alexey/work/vue3-minin-practice/src/views/Request.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/alexey/work/vue3-minin-practice/src/views/Request.vue","mtime":1648659200041},{"path":"/Users/alexey/work/vue3-minin-practice/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alexey/work/vue3-minin-practice/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/alexey/work/vue3-minin-practice/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alexey/work/vue3-minin-practice/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FsZXhleS93b3JrL3Z1ZTMtbWluaW4tcHJhY3RpY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYWxleGV5L3dvcmsvdnVlMy1taW5pbi1wcmFjdGljZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IHJlZiwgb25Nb3VudGVkLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlLCB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEFwcFBhZ2UgZnJvbSAnLi4vY29tcG9uZW50cy91aS9BcHBQYWdlJzsKaW1wb3J0IEFwcExvYWRlciBmcm9tICcuLi9jb21wb25lbnRzL3VpL0FwcExvYWRlcic7CmltcG9ydCBBcHBTdGF0dXMgZnJvbSAnLi4vY29tcG9uZW50cy91aS9BcHBTdGF0dXMnOwppbXBvcnQgeyBjdXJyZW5jeSB9IGZyb20gJy4uL3V0aWxzL2N1cnJlbmN5JzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgdmFyIHN0YXR1cyA9IHJlZigpOwogICAgdmFyIGxvYWRpbmcgPSByZWYodHJ1ZSk7CiAgICB2YXIgcmVxdWVzdCA9IHJlZih7fSk7CiAgICBvbk1vdW50ZWQoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfcmVxdWVzdCR2YWx1ZTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3JlcXVlc3QvbG9hZE9uZScsIHJvdXRlLnBhcmFtcy5pZCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmVxdWVzdC52YWx1ZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgc3RhdHVzLnZhbHVlID0gKF9yZXF1ZXN0JHZhbHVlID0gcmVxdWVzdC52YWx1ZSkgPT09IG51bGwgfHwgX3JlcXVlc3QkdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXF1ZXN0JHZhbHVlLnN0YXR1czsKICAgICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKICAgIHZhciBoYXNDaGFuZ2VzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcmVxdWVzdC52YWx1ZS5zdGF0dXMgIT09IHN0YXR1cy52YWx1ZTsKICAgIH0pOwoKICAgIHZhciByZW1vdmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3JlcXVlc3QvcmVtb3ZlJywgcm91dGUucGFyYW1zLmlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goJy8nKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgdXBkYXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVxdWVzdC52YWx1ZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzLnZhbHVlLAogICAgICAgICAgICAgICAgICBpZDogcm91dGUucGFyYW1zLmlkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncmVxdWVzdC91cGRhdGUnLCBkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVxdWVzdC52YWx1ZS5zdGF0dXMgPSBzdGF0dXMudmFsdWU7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgcmVxdWVzdDogcmVxdWVzdCwKICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LAogICAgICByZW1vdmU6IHJlbW92ZSwKICAgICAgdXBkYXRlOiB1cGRhdGUsCiAgICAgIHN0YXR1czogc3RhdHVzLAogICAgICBoYXNDaGFuZ2VzOiBoYXNDaGFuZ2VzCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQXBwUGFnZTogQXBwUGFnZSwKICAgIEFwcExvYWRlcjogQXBwTG9hZGVyLAogICAgQXBwU3RhdHVzOiBBcHBTdGF0dXMKICB9Cn07"},{"version":3,"sources":["/Users/alexey/work/vue3-minin-practice/src/views/Request.vue"],"names":[],"mappings":";;;AA2BA,SAAS,GAAT,EAAc,SAAd,EAAyB,QAAzB,QAAyC,KAAzC;AACA,SAAS,QAAT,QAAyB,MAAzB;AACA,SAAS,QAAT,EAAmB,SAAnB,QAAoC,YAApC;AACA,OAAO,OAAP,MAAoB,0BAApB;AACA,OAAO,SAAP,MAAsB,4BAAtB;AACA,OAAO,SAAP,MAAsB,4BAAtB;AACA,SAAS,QAAT,QAAyB,mBAAzB;AAEA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,GAAG,EAAlB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,IAAD,CAAnB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,EAAD,CAAnB;AAEA,IAAA,SAAS,uEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AACR,cAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;AADQ;AAAA,qBAEc,KAAK,CAAC,QAAN,CAAe,iBAAf,EAAkC,KAAK,CAAC,MAAN,CAAa,EAA/C,CAFd;;AAAA;AAER,cAAA,OAAO,CAAC,KAFA;AAGR,cAAA,MAAM,CAAC,KAAP,qBAAe,OAAO,CAAC,KAAvB,mDAAe,eAAe,MAA9B;AACA,cAAA,OAAO,CAAC,KAAR,GAAgB,KAAhB;;AAJQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT;AAOA,QAAM,UAAS,GAAI,QAAQ,CAAC;AAAA,aAAM,OAAO,CAAC,KAAR,CAAc,MAAd,KAAyB,MAAM,CAAC,KAAtC;AAAA,KAAD,CAA3B;;AAEA,QAAM,MAAK;AAAA,0EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACP,KAAK,CAAC,QAAN,CAAe,gBAAf,EAAiC,KAAK,CAAC,MAAN,CAAa,EAA9C,CADO;;AAAA;AAEb,gBAAA,MAAM,CAAC,IAAP,CAAY,GAAZ;;AAFa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AAKA,QAAM,MAAK;AAAA,0EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AACP,gBAAA,IADO,mCAER,OAAO,CAAC,KAFA;AAGX,kBAAA,MAAM,EAAE,MAAM,CAAC,KAHJ;AAIX,kBAAA,EAAE,EAAE,KAAK,CAAC,MAAN,CAAa;AAJN;AAAA;AAAA,uBAMP,KAAK,CAAC,QAAN,CAAe,gBAAf,EAAiC,IAAjC,CANO;;AAAA;AAOb,gBAAA,OAAO,CAAC,KAAR,CAAc,MAAd,GAAuB,MAAM,CAAC,KAA9B;;AAPa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAL,MAAK;AAAA;AAAA;AAAA,OAAX;;AAUA,WAAO;AAAE,MAAA,OAAO,EAAP,OAAF;AAAW,MAAA,OAAO,EAAP,OAAX;AAAoB,MAAA,QAAQ,EAAR,QAApB;AAA8B,MAAA,MAAM,EAAN,MAA9B;AAAsC,MAAA,MAAM,EAAN,MAAtC;AAA8C,MAAA,MAAM,EAAN,MAA9C;AAAsD,MAAA,UAAS,EAAT;AAAtD,KAAP;AACD,GAlCY;AAmCb,EAAA,UAAU,EAAE;AAAE,IAAA,OAAO,EAAP,OAAF;AAAW,IAAA,SAAS,EAAT,SAAX;AAAsB,IAAA,SAAQ,EAAR;AAAtB;AAnCC,CAAf","sourcesContent":["<template>\n  <app-loader v-if=\"loading\"></app-loader>\n  <app-page back title=\"Заявка\" v-else-if=\"request\">\n    <p><strong>Имя владельца</strong>: {{ request.fio }}</p>\n    <p><strong>Телефон</strong>: {{ request.phone }}</p>\n    <p><strong>Сумма</strong>: {{ currency(request.amount) }}</p>\n    <p><strong>Статус</strong>: <app-status :type=\"request.status\" /></p>\n\n    <div class=\"form-control\">\n      <label for=\"status\">Статус</label>\n      <select id=\"status\" v-model=\"status\">\n        <option value=\"done\">Завершен</option>\n        <option value=\"cancelled\">Отменен</option>\n        <option value=\"active\">Активен</option>\n        <option value=\"pending\">Выполняется</option>\n      </select>\n    </div>\n\n    <button class=\"btn danger\" @click=\"remove\">Удалить</button>\n    <button class=\"btn\" @click=\"update\" v-if=\"hasChanges\">Обновить</button>\n  </app-page>\n  <h3 v-else class=\"text-center text-white\">\n    Заявки с ID = {{ $route.params.id }} нет.\n  </h3>\n</template>\n\n<script>\nimport { ref, onMounted, computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute, useRouter } from 'vue-router'\nimport AppPage from '../components/ui/AppPage'\nimport AppLoader from '../components/ui/AppLoader'\nimport AppStatus from '../components/ui/AppStatus'\nimport { currency } from '../utils/currency'\n\nexport default {\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const store = useStore()\n    const status = ref()\n    const loading = ref(true)\n    const request = ref({})\n\n    onMounted(async () => {\n      loading.value = true\n      request.value = await store.dispatch('request/loadOne', route.params.id)\n      status.value = request.value?.status\n      loading.value = false\n    })\n\n    const hasChanges = computed(() => request.value.status !== status.value)\n\n    const remove = async () => {\n      await store.dispatch('request/remove', route.params.id)\n      router.push('/')\n    }\n\n    const update = async () => {\n      const data = {\n        ...request.value,\n        status: status.value,\n        id: route.params.id\n      }\n      await store.dispatch('request/update', data)\n      request.value.status = status.value\n    }\n\n    return { loading, request, currency, remove, update, status, hasChanges }\n  },\n  components: { AppPage, AppLoader, AppStatus }\n}\n</script>\n\n<style scoped></style>\n"],"sourceRoot":""}]}